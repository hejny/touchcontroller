<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample of TC (ES6)</title>
    <link rel="stylesheet" type="text/css" href="./index.css">
</head>
<body>



<svg data-playground='{"debug":true}' id="environment-trains"  width="500" height="500">
    <g transform="translate(4,4)" data-playground='{"amount": 1, "interactions": [{"type": "drag"}], "anchors":{"donors": [{"type": "trains", "position": {"x":-15,"y":0}}], "acceptors": [{"type": "trains", "position": {"x":20,"y":0}, "accepts": 1, "parent": true}]}}'>
        <rect width="30" height="30" x="0" y="0" style="fill: white; stroke: #1A6AA3; stroke-width: 2;"></rect>
    </g>
    <g transform="translate(4,44)" data-playground='{"amount": 1, "interactions": [{"type": "drag"}], "anchors":{"donors": [{"type": "trains", "position": {"x":-30,"y":0}}], "acceptors": [{"type": "trains", "position": {"x":35,"y":0}, "accepts": 1, "parent": true}]}}'>
        <rect width="60" height="30" x="0" y="0" style="fill: #E42C1A; stroke: #1A6AA3; stroke-width: 2;"></rect>
    </g>
    <g transform="translate(4,84)" data-playground='{"amount": 1, "interactions": [{"type": "drag"}], "anchors":{"donors": [{"type": "trains", "position": {"x":-45,"y":0}}], "acceptors": [{"type": "trains", "position": {"x":50,"y":0}, "accepts": 1, "parent": true}]}}'>
        <rect width="90" height="30" x="0" y="0" style="fill: #43B94A; stroke: #1A6AA3; stroke-width: 2;"></rect>
    </g>
</svg>
<script>
        for(const groupElement of document.getElementById('environment-trains').querySelectorAll('g')){

            const width = parseInt(groupElement.querySelector('rect').getAttribute('width'));

            groupElement.setAttribute('data-playground',JSON.stringify(
                {
                    "amount": 1,
                    "interactions": [
                        {"type": "drag"}
                    ],
                    "anchors":{
                        "donors": [
                            {"type": "trains", "position": {"x":width/-2,"y":0}, follow: true}
                        ],
                        "acceptors": [
                            {"type": "trains", "position": {"x":width/2+5,"y":0}, "accepts": 1}
                        ]
                    }
                }            
            ));
        }
    
    </script>


<svg data-playground='{"interactions":[{"type": "draw"}]}' id="environment-cubes" width="500" height="500">
        <g transform="translate(4,4)">
            <rect width="30" height="30" x="0" y="15" style="fill: #FF3820; stroke: #1A6AA3; stroke-width: 2;"></rect>
            <polygon points="0,15 0,15 15,0 45,0 45,0 30,15" style="fill: #FF3820; stroke: #1A6AA3; stroke-width: 2;"></polygon>
            <polygon points="45,0 45,0 30,15 30,45 30,45 45,30" style="fill: #FF3820; stroke: #1A6AA3; stroke-width: 2;"></polygon>
        </g>
        <g transform="translate(4,59)" >
            <rect width="30" height="30" x="0" y="15" style="fill: #40CEF6; stroke: #1A6AA3; stroke-width: 2;"></rect>
            <polygon points="0,15 0,15 15,0 45,0 45,0 30,15" style="fill: #40CEF6; stroke: #1A6AA3; stroke-width: 2;"></polygon>
            <polygon points="45,0 45,0 30,15 30,45 30,45 45,30" style="fill: #28A4D1; stroke: #1A6AA3; stroke-width: 2;"></polygon>
        </g>
        <g transform="translate(4,114)" >
            <rect width="30" height="30" x="0" y="15" style="fill: #43B94A; stroke: #1A6AA3; stroke-width: 2;"></rect>
            <polygon points="0,15 0,15 15,0 45,0 45,0 30,15" style="fill: #58C05F; stroke: #1A6AA3; stroke-width: 2;"></polygon>
            <polygon points="45,0 45,0 30,15 30,45 30,45 45,30" style="fill: #39943B; stroke: #1A6AA3; stroke-width: 2;"></polygon>
        </g>
        <g transform="translate(59,4)" >
            <rect width="30" height="30" x="0" y="15" style="fill: #9BA2A6; stroke: #1A6AA3; stroke-width: 2;"></rect>
            <polygon points="0,15 0,15 15,0 45,0 45,0 30,15" style="fill: #AEB5B9; stroke: #1A6AA3; stroke-width: 2;"></polygon>
            <polygon points="45,0 45,0 30,15 30,45 30,45 45,30" style="fill: #888E93; stroke: #1A6AA3; stroke-width: 2;"></polygon>
        </g>
        <g transform="translate(59,59)" >
            <rect width="30" height="30" x="0" y="15" style="fill: #FFEA3D; stroke: #1A6AA3; stroke-width: 2;"></rect>
            <polygon points="0,15 0,15 15,0 45,0 45,0 30,15" style="fill: #FFEA3D; stroke: #1A6AA3; stroke-width: 2;"></polygon>
            <polygon points="45,0 45,0 30,15 30,45 30,45 45,30" style="fill: #FFEA3D; stroke: #1A6AA3; stroke-width: 2;"></polygon>
        </g>
    </svg>

<script>
    const dataPlayground = {
        "amount": -1,
        "interactions":[{"type": "drag"}],
        "anchors":{
            "donors": [
                {"type": "cube-x-1", "position": {"x":-15,"y":0}},
                {"type": "cube-y-1", "position": {"x":0,"y":15}},
                {"type": "cube-z-1", "position": {"x":7,"y":-7}},

                {"type": "cube-x-2", "position": {"x":15,"y":0}},
                {"type": "cube-y-2", "position": {"x":0,"y":-15}},
                {"type": "cube-z-2", "position": {"x":-7,"y":7}},


            ], 
            "acceptors": [
                {"type": "cube-x-1", "position": {"x":15,"y":0}, "accepts": 1},
                {"type": "cube-y-1", "position": {"x":0,"y":-15}, "accepts": 1},
                {"type": "cube-z-1", "position": {"x":-7,"y":7}, "accepts": 1},

                {"type": "cube-x-2", "position": {"x":-15,"y":0}, "accepts": 1, order: 'UP'},
                {"type": "cube-y-2", "position": {"x":0,"y":15}, "accepts": 1, order: 'UP'},
                {"type": "cube-z-2", "position": {"x":7,"y":-7}, "accepts": 1, order: 'UP'},
            ]}}
    const dataPlaygroundAttr = JSON.stringify(dataPlayground);

    for(const groupElement of document.getElementById('environment-cubes').querySelectorAll('g')){
        groupElement.setAttribute('data-playground',dataPlaygroundAttr);
    }

</script>

<!--<canvas id="debug-layer" width="500" height="500"></canvas>-->

<script type="text/javascript" src="../../dist/touchcontroller.browser.js"></script>
<script type="text/javascript">
    const TC = TouchController;
</script>
<script type="text/javascript" src="./js/Rect.js"></script>
<script type="text/javascript" src="./js/Playground.js"></script>
<script type="text/javascript" src="./js/Anchor.js"></script>
<script type="text/javascript" src="./js/Acceptor.js"></script>
<script type="text/javascript" src="./js/Donor.js"></script>
<script type="text/javascript" src="./js/index.js"></script>
<script type="text/javascript">
    initializePlaygrounds();
</script>  

</body>
</html>
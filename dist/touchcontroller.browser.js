var TouchController=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";var r=n(6),o=n(25),i=n(30),s=n(31),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=o.toSubscriber(t,e,n);if(r?r.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var o;o=n.subscribe(function(e){if(o)try{t(e)}catch(t){r(t),o.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();e.Observable=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){if(this.x=t,this.y=e,isNaN(t)||isNaN(e))throw new Error("Vector2("+t+","+e+") can not be created due to NaN values.")}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(e.reduce(function(t,e){return t+e.x},this.x),e.reduce(function(t,e){return t+e.y},this.y))},t.prototype.addInPlace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var o=r[n];this.x+=o.x,this.y+=o.y}return this},t.add=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(e.reduce(function(t,e){return t+e.x},0),e.reduce(function(t,e){return t+e.y},0))},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},t.prototype.length=function(e){return void 0===e&&(e=t.Zero()),Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},t.prototype.rotation=function(e){return void 0===e&&(e=t.Zero()),Math.atan2(this.y-e.y,this.x-e.x)},t.prototype.rotate=function(e,n){void 0===n&&(n=t.Zero());var r=this.subtract(n),o=r.length(),i=r.rotation();return new t(Math.cos(i+e)*o,Math.sin(i+e)*o).add(n)},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},t.fromTopLeft=function(e){return new t(e.left,e.top)},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(14),i=n(3),s=n(16),u=n(7),c=function(t){function e(n,r,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!n){this.destination=s.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,n,r,o)}}return r(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);e.Subscriber=c;var a=function(t){function e(e,n,r,i){var u;t.call(this),this._parentSubscriber=e;var c=this;o.isFunction(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==s.empty&&(c=Object.create(n),o.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=u,this._error=r,this._complete=i}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)},function(t,e,n){"use strict";var r=n(26),o=n(27),i=n(14),s=n(28),u=n(15),c=n(29),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,f=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,b=a?a.length:0;n;)n.remove(this),n=++p<b&&a[p]||null;if(i.isFunction(f))s.tryCatch(f).call(this)===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof c.UnsubscriptionError?l(u.errorObject.e.errors):[u.errorObject.e]));if(r.isArray(h))for(p=-1,b=h.length;++p<b;){var d=h[p];if(o.isObject(d))if(s.tryCatch(d.unsubscribe).call(d)===u.errorObject){e=!0,t=t||[];var y=u.errorObject.e;y instanceof c.UnsubscriptionError?t=t.concat(l(y.errors)):t.push(y)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function l(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}e.Subscription=a},function(t,e,n){"use strict";var r=n(0),o=n(33);r.Observable.prototype.share=o.share},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=n||void 0!==t&&t||r;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,n(5))},function(t,e,n){"use strict";var r=n(6).root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(4),n(40),n(4);var o=n(9),i=function(){function t(t,e,n){var o=this;this.type=t,this.anchorElement=e,this.firstFrame=n,this.lastFrame=n,this.lastFrame2=n,this.frames=r.Observable.create(function(t){t.next(n),o._framesObserver=t}).share()}return t.prototype.move=function(t,e){void 0===e&&(e=!1),void 0!==this._framesObserver&&(this.lastFrame2=this.lastFrame,this.lastFrame=t,this._framesObserver.next(t),e&&this.end())},t.prototype.end=function(){this._framesObserver.complete()},Object.defineProperty(t.prototype,"start",{get:function(){return this.firstFrame.time},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Touch"},t.Click=function(e,n,r){var i=new t("MOUSE",n,new o.default(e,n,r));return setTimeout(function(){i.end()},100),i},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){function t(t,e,n,o,i,s,u){void 0===n&&(n=r.default.Zero()),void 0===o&&(o=performance.now()),void 0===i&&(i=!1),void 0===s&&(s=0),void 0===u&&(u=r.default.Zero()),this.element=t,this.anchorElement=e,this.positionRelative=n,this.time=o,this.rotating=i,this.force=s,this.radius=u;var c=r.default.fromTopLeft(t.getBoundingClientRect()).subtractInPlace(r.default.fromTopLeft(e.getBoundingClientRect()));this.position=this.positionRelative.add(c)}return t.prototype.clone=function(){return new t(this.element,this.anchorElement,this.positionRelative,this.time,this.rotating,this.force,this.radius)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(51),i=function(){function t(t,e,n){void 0===t&&(t=r.default.Zero()),void 0===e&&(e=0),void 0===n&&(n=1),this.translate=t,this.rotate=e,this.scale=n}return t.Neutral=function(){return new t},t.translate=function(e){return new t(e)},t.rotate=function(e){return new t(void 0,e)},t.scale=function(e){return new t(void 0,void 0,e)},t.prototype.clone=function(){return new t(this.translate,this.rotate,this.scale)},t.prototype.cloneDeep=function(){return new t(this.translate.clone(),this.rotate,this.scale)},t.prototype.add=function(e){return new t(this.translate.add(e.translate),(this.rotate+e.rotate)%(2*Math.PI),this.scale*e.scale)},t.prototype.subtract=function(e){return new t(this.translate.subtract(e.translate),(this.rotate-e.rotate+2*Math.PI)%(2*Math.PI),this.scale/e.scale)},t.prototype.applyOnElement=function(t){switch(t.tagName){case"g":this.applyOnSvgElement(t);break;default:this.applyOnHtmlElement(t)}},t.prototype.applyOnHtmlElement=function(t){t.style.left=parseFloat(t.style.left||"0px")+this.translate.x+"px",t.style.top=parseFloat(t.style.top||"0px")+this.translate.y+"px"},t.prototype.applyOnSvgElement=function(t){t.setAttribute("transform",o.vectorToTranslate(o.translateToVector(t.getAttribute("transform")||void 0).add(this.translate)))},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(10),i=function(){function t(t,e,n){void 0===t&&(t=r.default.Zero()),void 0===e&&(e=r.default.One()),void 0===n&&(n=0),this.center=t,this.size=e,this.rotation=n}return t.One=function(){return new t},t.fromMinMax=function(e,n,o,i,s){return new t(new r.default((e+o)/2,(n+i)/2),new r.default(e-o,n-i),s)},t.prototype.clone=function(){return new t(this.center,this.size,this.rotation)},t.prototype.cloneDeep=function(){return new t(this.center.clone(),this.size.clone(),this.rotation)},t.prototype.applyTransformation=function(t){this.center.addInPlace(t.translate),this.size.scaleInPlace(t.scale),this.rotation+=t.rotate},t.prototype.intersects=function(t){var e=this.center,n=t.rotate(-this.rotation,this.center);return e.x-this.size.x/2<=n.x&&e.y-this.size.y/2<=n.y&&e.x+this.size.x/2>=n.x&&e.y+this.size.y/2>=n.y},t.prototype.grow=function(e){return new t(this.center,new r.default(this.size.x+2*e,this.size.y+2*e),this.rotation)},t.prototype.rotate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.center),this.center=this.center.rotate(t,e),this.rotation+=t},t.prototype.isIn=function(t){return t.intersects(this.topLeft)&&t.intersects(this.topRight)&&t.intersects(this.bottomLeft)&&t.intersects(this.bottomRight)},Object.defineProperty(t.prototype,"topLeft",{get:function(){return this.center.add(new r.default(-.5*this.size.x,-.5*this.size.y)).rotate(this.rotation,this.center)},set:function(t){this.center=this.center.add(t.subtract(this.topLeft))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return this.center.add(new r.default(.5*this.size.x,-.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return this.center.add(new r.default(-.5*this.size.x,.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return this.center.add(new r.default(.5*this.size.x,.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),t.prototype.countTransformation=function(t){return new o.default(t.center.subtract(this.center),t.rotation-this.rotation,t.size.x/t.size.x)},t.prototype.redrawToElement=function(t){t.style.display="block",t.style.position="fixed",t.style.zIndex="9999",t.style.border="2px solid red",t.style.left=this.center.x+"px",t.style.top=this.center.y+"px",t.style.width=this.size.x+"px",t.style.height=this.size.y+"px",t.style.transform="translate(-50%, -50%) rotate("+this.rotation/Math.PI*180+"deg)"},t}();e.default=i},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(24),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,a=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?a=c.concat(a):f=-1,a.length&&p())}function p(){if(!l){var t=u(h);l=!0;for(var e=a.length;e;){for(c=a,a=[];++f<e;)c&&c[f].run();f=-1,e=a.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function b(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new b(t,e)),1!==a.length||l||u(p)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(0),i=n(2),s=n(3),u=n(37),c=n(38),a=n(7),l=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(i.Subscriber);e.SubjectSubscriber=l;var f=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[a.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(o.Observable);e.Subject=f;var h=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(f);e.AnonymousSubject=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(2);e.refCount=function(){return function(t){return t.lift(new i(t))}};var i=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),s=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39);e.createMouseListener=r.default;var o=n(45);e.createTouchListener=o.default},function(t,e,n){(function(t,r){var o=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),c=r[n];n<i;c=r[++n])d(c)||!_(c)?s+=" "+c:s+=" "+u(c);return s},e.deprecate=function(n,o){if(m(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return n.apply(this,arguments)}};var i,s={};function u(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,t,r.depth)}function c(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function a(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return v(o)||(o=l(t,o,r)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(b(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(i)return i;var s=Object.keys(n),u=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),O(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(x(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(g(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return f(n)}var a,_="",S=!1,j=["{","}"];(p(n)&&(S=!0,j=["[","]"]),x(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),O(n)&&(_=" "+f(n)),0!==s.length||S&&0!=n.length?r<0?g(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),a=S?function(t,e,n,r,o){for(var i=[],s=0,u=e.length;s<u;++s)E(e,String(s))?i.push(h(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))}),i}(t,n,r,u,s):s.map(function(e){return h(t,n,r,u,e,S)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(a,_,j)):j[0]+_+j[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),E(r,o)||(s="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=d(n)?l(t,c.value,null):l(t,c.value,n-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function p(t){return Array.isArray(t)}function b(t){return"boolean"==typeof t}function d(t){return null===t}function y(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function g(t){return _(t)&&"[object RegExp]"===S(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===S(t)}function O(t){return _(t)&&("[object Error]"===S(t)||t instanceof Error)}function x(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function j(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(i)&&(i=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var n=r.pid;s[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else s[t]=function(){};return s[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=b,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=g,e.isObject=_,e.isDate=w,e.isError=O,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(43);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[j(t.getHours()),j(t.getMinutes()),j(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(44),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(5),n(13))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(10),i=n(11),s=n(1);e.default=function(t,e){return void 0===e&&(e=i.default.One()),r.Observable.create(function(n){var r=[];t.ongoingTouchesChanges.subscribe(function(t){for(var i=0,u=r;i<u.length;i++)u[i].unsubscribe();var c,a=(c=1===t.length?t[0].lastFrame.rotating?function(t){return new o.default(void 0,e.center.rotation(t.lastFrame.position),1)}:function(t){return new o.default(t.lastFrame.position,0,1)}:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new o.default((t=s.default.Zero()).add.apply(t,e.map(function(t){return t.lastFrame.position})).scale(1/e.length),e[0].lastFrame.position.rotation(e[1].lastFrame.position),e[0].lastFrame.position.length(e[1].lastFrame.position))}).apply(void 0,t),l=function(){var r=c.apply(void 0,t),o=r.subtract(a);e.applyTransformation(o),n.next(o),a=r};r=t.map(function(t){return t.frames.subscribe(l)})},function(){},function(){n.complete()})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23);e.TouchController=r.default;var o=n(46);e.MultiTouchController=o.default;var i=n(21);e.multiTouchTransformations=i.default;var s=n(10);e.Transformation=s.default;var u=n(19);e.listeners=u;var c=n(1);e.Vector2=c.default;var a=n(8);e.Touch=a.default;var l=n(11);e.BoundingBox=l.default},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(4);var o=n(19),i=function(){function e(t,e,n){void 0===n&&(n=!0);var i=this;this.elements=t,this.anchorElement=e,this.touches=r.Observable.create(function(t){i._touchesObserver=t}).share(),this.hoveredFrames=r.Observable.create(function(t){i._hoveredFramesObserver=t}).share(),n&&(this.addListener(o.createMouseListener()),this.addListener(o.createMouseListener([1,2],!0)),this.addListener(o.createTouchListener()))}return e.fromCanvas=function(t){return new e([t],t,!0)},e.prototype.addListener=function(t){for(var e=this,n=0,r=this.elements;n<r.length;n++){t(r[n],this.anchorElement,function(t){return e._touchesObserver.next(t)},function(t){void 0!==e._hoveredFramesObserver&&e._hoveredFramesObserver.next(t)})}},e.prototype.emulateTouch=function(e){var n=this;t(function(){n._touchesObserver.next(e)})},e}();e.default=i}).call(this,n(12).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},s=!1,u=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var t=u.documentElement;r=function(e){var n=u.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return i[o]=s,r(o),o++},c.clearImmediate=a}function a(t){delete i[t]}function l(t){if(s)setTimeout(l,0,t);else{var e=i[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{a(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(5),n(13))},function(t,e,n){"use strict";var r=n(2),o=n(7),i=n(16);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(i.empty)}},function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r,o=n(15);function i(){try{return r.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return r=t,i}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,n){"use strict";var r=n(6);function o(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.getSymbolObservable=o,e.observable=o(r.root),e.$$observable=e.observable},function(t,e,n){"use strict";var r=n(32);function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},e.pipeFromArray=o},function(t,e,n){"use strict";e.noop=function(){}},function(t,e,n){"use strict";var r=n(34);e.share=function(){return r.share()(this)}},function(t,e,n){"use strict";var r=n(35),o=n(18),i=n(17);function s(){return new i.Subject}e.share=function(){return function(t){return o.refCount()(r.multicast(s)(t))}}},function(t,e,n){"use strict";var r=n(36);e.multicast=function(t,e){return function(n){var i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));var s=Object.create(n,r.connectableObservableDescriptor);return s.source=n,s.subjectFactory=i,s}};var o=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();e.MulticastOperator=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(17),i=n(0),s=n(2),u=n(3),c=n(18),a=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new u.Subscription).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=u.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return c.refCount()(this)},e}(i.Observable);e.ConnectableObservable=a;var l=a.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};var f=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(o.SubjectSubscriber),h=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new h(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o}}(),function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(s.Subscriber))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(3).Subscription);e.SubjectSubscription=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(9),i=n(1),s=null;e.default=function(t,e){return void 0===t&&(t=[0]),void 0===e&&(e=!1),function(n,u,c,a){n.addEventListener("mousedown",function(e){return function(e){if(-1!==t.indexOf(e.button)){s&&s.end(),l=new r.default("MOUSE",u,h(e)),document.addEventListener("mousemove",f,!1);var n=function(){console.log("mouseup"),l&&(l.end,l=null),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",n)};document.addEventListener("mouseup",n,!1),c(l),s=l}}(e)},!1),n.addEventListener("mousemove",function(t){return function(t){t.buttons>0||l||a(h(t))}(t)},!1),n.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation()},!1);var l=null;function f(t){t.preventDefault(),t.stopPropagation(),l&&l.move(h(t),!1)}function h(t){var r=n.getBoundingClientRect();return new o.default(n,u,new i.default(t.clientX-r.left,t.clientY-r.top),performance.now(),e)}return function(){}}}},function(t,e,n){"use strict";var r=n(0),o=n(41);r.Observable.range=o.range},function(t,e,n){"use strict";var r=n(42);e.range=r.RangeObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e,n,r){t.call(this),this.start=e,this._count=n,this.scheduler=r}return r(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n,r)},e.dispatch=function(t){var e=t.start,n=t.index,r=t.count,o=t.subscriber;n>=r?o.complete():(o.next(e),o.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=0,r=this.start,o=this._count,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:n,count:o,start:r,subscriber:t});for(;;){if(n++>=o){t.complete();break}if(t.next(r++),t.closed)break}},e}(n(0).Observable);e.RangeObservable=o},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(9),i=n(1),s=n(20);e.default=function(t){return void 0===t&&(t=[0]),function(t,e,n,u){t.addEventListener("touchstart",function(t){return function(t){t.preventDefault();for(var o=t.changedTouches,i=0,s=o.length;i<s;i++){var u=new r.default("TOUCH",e,l(o[i]));c[o[i].identifier]=u,n(u)}}(t)},!1),t.addEventListener("touchmove",function(t){return function(t){t.preventDefault();for(var e=t.changedTouches,n=0,r=e.length;n<r;n++){var o=c[e[n].identifier]||null;s.isNull(o)||o.move(l(e[n]),!1)}}(t)},!1),t.addEventListener("touchend",function(t){return a(t)},!1),t.addEventListener("touchcancel",function(t){return a(t)},!1);var c={};function a(t){t.preventDefault();for(var e=t.changedTouches,n=0,r=e.length;n<r;n++){var o=c[e[n].identifier]||null;s.isNull(o)||(o.move(l(e[n]),!0),delete c[e[n].identifier])}}function l(n){var r=t.getBoundingClientRect();return new o.default(t,e,new i.default(n.clientX-r.left,n.clientY-r.top),performance.now())}return function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(4);var o=n(47),i=function(){function t(t,e){var n=this;this.touchController=t,this._elementBinder=e,this.ongoingMultiTouches=[],this.multiTouches=r.Observable.create(function(t){n._multiTouchesObserver=t}).share(),this.touchController.touches.subscribe(function(t){var e=n._elementBinder(t.firstFrame),r=n.ongoingMultiTouches.filter(function(t){return t.element===e})[0];void 0===r?(r=new o.default(e,t),n.ongoingMultiTouches.push(r),n._multiTouchesObserver.next(r),r.touches.subscribe(function(){},function(){},function(){n.ongoingMultiTouches=n.ongoingMultiTouches.filter(function(t){return t!==r})})):r.addTouch(t)})}return Object.defineProperty(t.prototype,"hoveredElements",{get:function(){var t=this;return r.Observable.create(function(e){t.touchController.hoveredFrames.subscribe(function(n){e.next(t._elementBinder(n))})})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoveredElementsChanges",{get:function(){var t=this;return r.Observable.create(function(e){var n;t.hoveredElements.subscribe(function(t){n!==t&&(e.next([t,n]),n=t)})})},enumerable:!0,configurable:!0}),t}();e.default=i},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(48),n(4);var o=n(21),i=n(11),s=function(){function e(e,n){var o=this;this.element=e,this.firstTouch=n,this.empty=!0,this.ongoingTouches=[],this.touches=r.Observable.create(function(e){o._touchesObserver=e,t(function(){return o.addTouch(n)})}).share()}return e.prototype.addTouch=function(t){var e=this;this.ongoingTouches.push(t),this._touchesObserver.next(t),t.frames.subscribe(function(n){t.firstFrame.position.length(n.position)>=5&&(e.empty=!1)},function(){},function(){e.ongoingTouches=e.ongoingTouches.filter(function(e){return e!==t}),0===e.ongoingTouches.length&&e._touchesObserver.complete()})},Object.defineProperty(e.prototype,"ongoingTouchesChanges",{get:function(){var e=this;return r.Observable.create(function(n){e.touches.subscribe(function(r){n.next(e.ongoingTouches),r.frames.subscribe(function(t){},function(){},function(){t(function(){return n.next(e.ongoingTouches)})})},function(){},function(){n.complete()})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ongoingPositionsChanges",{get:function(){var t=this;return r.Observable.create(function(e){var n=[];t.ongoingTouchesChanges.subscribe(function(t){for(var r=0,o=n;r<o.length;r++){o[r].unsubscribe()}n=t.map(function(n){return n.frames.subscribe(function(){e.next(t)})})},function(){},function(){e.complete()})})},enumerable:!0,configurable:!0}),e.prototype.transformations=function(t){return void 0===t&&(t=i.default.One()),o.default(this,t)},e.prototype.toString=function(){return"MultiTouch"},e}();e.default=s}).call(this,n(12).setImmediate)},function(t,e,n){"use strict";var r=n(0),o=n(49);r.Observable.prototype.finally=o._finally,r.Observable.prototype._finally=o._finally},function(t,e,n){"use strict";var r=n(50);e._finally=function(t){return r.finalize(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(2),i=n(3);e.finalize=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.callback))},t}(),u=function(t){function e(e,n){t.call(this,e),this.add(new i.Subscription(n))}return r(e,t),e}(o.Subscriber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.vectorToTranslate=function(t){return"translate("+t.x+","+t.y+")"},e.translateToVector=function(t){void 0===t&&(t="translate(0,0)");var e=t.split("translate(")[1].split(")")[0].split(/,|\s+/),n=e[0],o=e[1];return new r.default(parseFloat(n),parseFloat(o))}}]);
//# sourceMappingURL=touchcontroller.browser.js.map
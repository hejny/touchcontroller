!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){if(this.x=t,this.y=e,isNaN(t)||isNaN(e))throw new Error("Vector2("+t+","+e+") can not be created due to NaN values.")}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(e.reduce(function(t,e){return t+e.x},this.x),e.reduce(function(t,e){return t+e.y},this.y))},t.prototype.addInPlace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var o=r[n];this.x+=o.x,this.y+=o.y}return this},t.add=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(e.reduce(function(t,e){return t+e.x},0),e.reduce(function(t,e){return t+e.y},0))},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},t.prototype.length=function(e){return void 0===e&&(e=t.Zero()),Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},t.prototype.rotation=function(e){return void 0===e&&(e=t.Zero()),Math.atan2(this.y-e.y,this.x-e.x)},t.prototype.rotate=function(e,n){void 0===n&&(n=t.Zero());var r=this.subtract(n),o=r.length(),i=r.rotation();return new t(Math.cos(i+e)*o,Math.sin(i+e)*o).add(n)},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},t.fromTopLeft=function(e){return new t(e.left,e.top)},t}();e.Vector2=r},function(t,e,n){"use strict";var r=n(8),o=n(27),i=n(32),s=n(33),c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=o.toSubscriber(t,e,n);if(r?r.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var o;o=n.subscribe(function(e){if(o)try{t(e)}catch(t){r(t),o.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();e.Observable=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(13),i=n(3),s=n(15),c=n(10),u=function(t){function e(n,r,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!n){this.destination=s.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,n,r,o)}}return r(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);e.Subscriber=u;var a=function(t){function e(e,n,r,i){var c;t.call(this),this._parentSubscriber=e;var u=this;o.isFunction(n)?c=n:n&&(c=n.next,r=n.error,i=n.complete,n!==s.empty&&(u=Object.create(n),o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=r,this._complete=i}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},function(t,e,n){"use strict";var r=n(28),o=n(29),i=n(13),s=n(30),c=n(14),u=n(31),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,l=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,b=a?a.length:0;n;)n.remove(this),n=++p<b&&a[p]||null;if(i.isFunction(l))s.tryCatch(l).call(this)===c.errorObject&&(e=!0,t=t||(c.errorObject.e instanceof u.UnsubscriptionError?h(c.errorObject.e.errors):[c.errorObject.e]));if(r.isArray(f))for(p=-1,b=f.length;++p<b;){var d=f[p];if(o.isObject(d))if(s.tryCatch(d.unsubscribe).call(d)===c.errorObject){e=!0,t=t||[];var v=c.errorObject.e;v instanceof u.UnsubscriptionError?t=t.concat(h(v.errors)):t.push(v)}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function h(t){return t.reduce(function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)},[])}e.Subscription=a},function(t,e,n){"use strict";var r=n(1),o=n(35);r.Observable.prototype.share=o.share},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(12),i=function(){function t(t,e,n,o){void 0===t&&(t=r.Vector2.Zero()),void 0===e&&(e=0),void 0===n&&(n=r.Vector2.Zero()),void 0===o&&(o=1),this.translate=t,this.rotate=e,this.rotateCenter=n,this.scale=o}return t.Neutral=function(){return new t},t.translate=function(e){return new t(e)},t.rotate=function(e){return new t(void 0,e)},t.scale=function(e){return new t(void 0,void 0,void 0,e)},t.prototype.clone=function(){return new t(this.translate,this.rotate,this.rotateCenter,this.scale)},t.prototype.cloneDeep=function(){return new t(this.translate.clone(),this.rotate,this.rotateCenter.clone(),this.scale)},t.prototype.add=function(e){return new t(this.translate.add(e.translate),(this.rotate+e.rotate)%(2*Math.PI),this.rotateCenter.add(e.rotateCenter),this.scale*e.scale)},t.prototype.subtract=function(e){return new t(this.translate.subtract(e.translate),(this.rotate-e.rotate+2*Math.PI)%(2*Math.PI),this.rotateCenter.subtract(e.rotateCenter),this.scale/e.scale)},t.prototype.applyOnElement=function(t){switch(t.tagName){case"g":this.applyOnSvgElement(t);break;default:this.applyOnHtmlElement(t)}},t.prototype.applyOnHtmlElement=function(t){t.style.left=parseFloat(t.style.left||"0px")+this.translate.x+"px",t.style.top=parseFloat(t.style.top||"0px")+this.translate.y+"px"},t.prototype.applyOnSvgElement=function(t){var e=t.getAttribute("transform")||"",n=o.svgTransformationDecode(e).add(this),r=o.svgTransformationEncode(n);t.setAttribute("transform",r)},t}();e.Transformation=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(5),i=function(){function t(t,e,n){void 0===t&&(t=r.Vector2.Zero()),void 0===e&&(e=r.Vector2.One()),void 0===n&&(n=0),this.center=t,this.size=e,this.rotation=n}return t.One=function(){return new t},t.fromMinMax=function(e,n,o,i,s){return new t(new r.Vector2((e+o)/2,(n+i)/2),new r.Vector2(e-o,n-i),s)},t.prototype.clone=function(){return new t(this.center,this.size,this.rotation)},t.prototype.cloneDeep=function(){return new t(this.center.clone(),this.size.clone(),this.rotation)},t.prototype.applyTransformation=function(t){this.center.addInPlace(t.translate),this.size.scaleInPlace(t.scale),this.rotation+=t.rotate},t.prototype.intersects=function(t){var e=this.center,n=t.rotate(-this.rotation,this.center);return e.x-this.size.x/2<=n.x&&e.y-this.size.y/2<=n.y&&e.x+this.size.x/2>=n.x&&e.y+this.size.y/2>=n.y},t.prototype.grow=function(e){return new t(this.center,new r.Vector2(this.size.x+2*e,this.size.y+2*e),this.rotation)},t.prototype.rotate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.center),this.center=this.center.rotate(t,e),this.rotation+=t},t.prototype.isIn=function(t){return t.intersects(this.topLeft)&&t.intersects(this.topRight)&&t.intersects(this.bottomLeft)&&t.intersects(this.bottomRight)},Object.defineProperty(t.prototype,"topLeft",{get:function(){return this.center.add(new r.Vector2(-.5*this.size.x,-.5*this.size.y)).rotate(this.rotation,this.center)},set:function(t){this.center=this.center.add(t.subtract(this.topLeft))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return this.center.add(new r.Vector2(.5*this.size.x,-.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return this.center.add(new r.Vector2(-.5*this.size.x,.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return this.center.add(new r.Vector2(.5*this.size.x,.5*this.size.y)).rotate(this.rotation,this.center)},enumerable:!0,configurable:!0}),t.prototype.countTransformation=function(t){return new o.Transformation(t.center.subtract(this.center),t.rotation-this.rotation,void 0,t.size.x/t.size.x)},t.prototype.redrawToElement=function(t){t.style.display="block",t.style.position="fixed",t.style.zIndex="9999",t.style.border="2px solid red",t.style.left=this.center.x+"px",t.style.top=this.center.y+"px",t.style.width=this.size.x+"px",t.style.height=this.size.y+"px",t.style.transform="translate(-50%, -50%) rotate("+this.rotation/Math.PI*180+"deg)"},t}();e.BoundingBox=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);n(4),n(41),n(4);var o=n(11),i=function(){function t(t,e,n){var o=this;this.type=t,this.anchorElement=e,this.firstFrame=n,this.lastFrame=n,this.lastFrame2=n,this.frames=r.Observable.create(function(t){t.next(n),o._framesObserver=t}).share()}return t.prototype.move=function(t,e){void 0===e&&(e=!1),void 0!==this._framesObserver&&(this.lastFrame2=this.lastFrame,this.lastFrame=t,this._framesObserver.next(t),e&&this.end())},t.prototype.end=function(){this._framesObserver.complete()},Object.defineProperty(t.prototype,"start",{get:function(){return this.firstFrame.time},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Touch"},t.Click=function(e,n,r){var i=new t("MOUSE",n,new o.TouchFrame(e,n,r));return setTimeout(function(){i.end()},100),i},t}();e.Touch=i},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=n||void 0!==t&&t||r;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,n(9))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(8).root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(t,e,n,o,i,s,c){void 0===n&&(n=r.Vector2.Zero()),void 0===o&&(o=performance.now()),void 0===i&&(i=!1),void 0===s&&(s=0),void 0===c&&(c=r.Vector2.Zero()),this.element=t,this.anchorElement=e,this.positionRelative=n,this.time=o,this.rotating=i,this.force=s,this.radius=c;var u=r.Vector2.fromTopLeft(t.getBoundingClientRect()).subtractInPlace(r.Vector2.fromTopLeft(e.getBoundingClientRect()));this.position=this.positionRelative.add(u)}return t.prototype.clone=function(){return new t(this.element,this.anchorElement,this.positionRelative,this.time,this.rotating,this.force,this.radius)},t}();e.TouchFrame=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(0),i=/\w*\([^)]*\)/g,s=/^translate\(\s*(\-?\d*\.?\d+(e\-?\d*\.?\d+)?)\s*,?\s*(\-?\d*\.?\d+(e\-?\d*\.?\d+)?)\s*\)$/g,c=/^rotate\(\s*(\-?\d*\.?\d+(e\-?\d*\.?\d+)?)\s*,?\s*(\-?\d*\.?\d+(e\-?\d*\.?\d+)?)\s*,?\s*(\-?\d*\.?\d+(e\-?\d*\.?\d+)?)\s*\)$/g;e.svgTransformationDecode=function(t){void 0===t&&(t="");var e=r.Transformation.Neutral();i.lastIndex=0;for(var n=[],u=null;u=i.exec(t);)n.push(u[0]);return n?(n.map(function(t){if(s.lastIndex=0,c.lastIndex=0,s.test(t)){s.lastIndex=0;var n=s.exec(t).map(function(t){return parseFloat(t)}),r=(n[0],n[1]),i=(n[2],n[3]);n[4],e.translate=new o.Vector2(r,i)}else if(c.test(t)){c.lastIndex=0;var u=c.exec(t).map(function(t){return parseFloat(t)}),a=(u[0],u[1]);u[2],r=u[3],u[4],i=u[5],u[6],e.rotate=a/180*Math.PI,e.rotateCenter=new o.Vector2(r,i)}else console.warn('Unknown part of svg transform "'+t+'".',s.test(t),c.test(t))}),e):(console.warn('Can not decode svg transform "'+t+'".'),r.Transformation.Neutral())},e.svgTransformationEncode=function(t){var e=t.translate,n=t.rotate,r=t.rotateCenter;return"translate("+e.x+" "+e.y+") rotate("+n/Math.PI*180+" "+r.x+" "+r.y+")"}},function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(1),i=n(2),s=n(3),c=n(39),u=n(40),a=n(10),h=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(i.Subscriber);e.SubjectSubscriber=h;var l=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[a.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(o.Observable);e.Subject=l;var f=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(l);e.AnonymousSubject=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(2);e.refCount=function(){return function(t){return t.lift(new i(t))}};var i=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),s=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(o.Subscriber)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(46),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(9))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(6),i=n(5),s=n(0);e.multiTouchTransformations=function(t,e){return void 0===e&&(e=o.BoundingBox.One()),r.Observable.create(function(n){var r=[];t.ongoingTouchesChanges.subscribe(function(t){for(var o=0,c=r;o<c.length;o++)c[o].unsubscribe();var u,a=(u=1===t.length?t[0].lastFrame.rotating?function(t){return new i.Transformation(void 0,e.center.rotation(t.lastFrame.position),void 0,1)}:function(t){return new i.Transformation(t.lastFrame.position,0,void 0,1)}:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new i.Transformation((t=s.Vector2.Zero()).add.apply(t,e.map(function(t){return t.lastFrame.position})).scale(1/e.length),e[0].lastFrame.position.rotation(e[1].lastFrame.position),void 0,e[0].lastFrame.position.length(e[1].lastFrame.position))}).apply(void 0,t),h=function(){var r=u.apply(void 0,t),o=r.subtract(a);e.applyTransformation(o),n.next(o),a=r};r=t.map(function(t){return t.frames.subscribe(h)})},function(){},function(){n.complete()})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(7),i=n(0),s=null;e.createMouseListener=function(t,e){return void 0===t&&(t=[0]),void 0===e&&(e=!1),function(n,c,u,a){n.addEventListener("mousedown",function(e){return function(e){if(-1!==t.indexOf(e.button)){e.preventDefault(),e.stopPropagation(),s&&s.end(),h=new o.Touch("MOUSE",c,f(e)),document.addEventListener("mousemove",l,!1);var n=function(){h&&(h.end(),h=null),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",n)};document.addEventListener("mouseup",n,!1),u(h),s=h}}(e)},!1),n.addEventListener("mousemove",function(t){return function(t){t.buttons>0||h||a(f(t))}(t)},!1),n.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation()},!1);var h=null;function l(t){t.preventDefault(),t.stopPropagation(),h&&h.move(f(t),!1)}function f(t){var o=n.getBoundingClientRect();return new r.TouchFrame(n,c,new i.Vector2(t.clientX-o.left,t.clientY-o.top),performance.now(),e)}return function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(7),i=n(0);e.createTouchListener=function(t){return void 0===t&&(t=[0]),function(t,e,n,s){t.addEventListener("touchstart",function(t){return function(t){t.preventDefault();for(var r=t.changedTouches,i=0,s=r.length;i<s;i++){var u=new o.Touch("TOUCH",e,a(r[i]));c[r[i].identifier]=u,n(u)}}(t)},!1),t.addEventListener("touchmove",function(t){return function(t){t.preventDefault();for(var e=t.changedTouches,n=0,r=e.length;n<r;n++){var o=c[e[n].identifier]||null;o&&o.move(a(e[n]),!1)}}(t)},!1),t.addEventListener("touchend",function(t){return u(t)},!1),t.addEventListener("touchcancel",function(t){return u(t)},!1);var c={};function u(t){t.preventDefault();for(var e=t.changedTouches,n=0,r=e.length;n<r;n++){var o=c[e[n].identifier]||null;o&&(o.move(a(e[n]),!0),delete c[e[n].identifier])}}function a(n){var o=t.getBoundingClientRect();return new r.TouchFrame(t,e,new i.Vector2(n.clientX-o.left,n.clientY-o.top),performance.now())}return function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23);e.CanvasParticlesRenderer=r.CanvasParticlesRenderer;var o=n(6);e.BoundingBox=o.BoundingBox;var i=n(7);e.Touch=i.Touch;var s=n(5);e.Transformation=s.Transformation;var c=n(44);e.MultiTouchController=c.MultiTouchController;var u=n(51);e.TouchController=u.TouchController;var a=n(19);e.multiTouchTransformations=a.multiTouchTransformations;var h=n(20);e.createMouseListener=h.createMouseListener;var l=n(21);e.createTouchListener=l.createTouchListener;var f=n(12);e.svgTransformationDecode=f.svgTransformationDecode,e.svgTransformationEncode=f.svgTransformationEncode;var p=n(0);e.Vector2=p.Vector2},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(24),i=n(26),s=function(){function t(t){var e=this;this._contexts=[],this._subscribers=[],this.lastRenderNow=null;var n=document.createElement("canvas");console.log(t),n.width=t.x,n.height=t.y,console.log(n),this.ctx=n.getContext("2d"),console.log(this.ctx),console.log(this.ctx.canvas),this.scene=new o.Scene(this.ctx,.05),requestAnimationFrame(function(t){return e.render(t)})}return t.prototype.addContext=function(t){this._contexts.push(t)},t.prototype.subscribe=function(t){this._subscribers.push(t)},t.prototype.callSubscribers=function(){for(var t=0,e=this._subscribers;t<e.length;t++){(0,e[t])()}},t.prototype.addPoint=function(t){var e=new i.Particle("./particle.png",new r.Vector2(.5,.5),1,t,-Math.PI/2,1);e.movement=new r.Vector2(10*(Math.random()-.5),10*(Math.random()-.5)),e.rotationMovement=(Math.random()-.5)*Math.PI*2/100,e.growth=1,this.scene.addObject(e)},t.prototype.render=function(t){var e=this;this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.lastRenderNow&&this.scene.update((t-this.lastRenderNow)/1e3),this.lastRenderNow=t,this.scene.render();for(var n=0,r=this._contexts;n<r.length;n++){var o=r[n];o.drawImage(this.ctx.canvas,0,0,this.ctx.canvas.width,this.ctx.canvas.height,0,0,o.canvas.width,o.canvas.height)}this.callSubscribers(),requestAnimationFrame(function(t){return e.render(t)})},t}();e.CanvasParticlesRenderer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(25),i=function(){function t(t,e){this.ctx=t,this.friction=e,this.objects=[]}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.render=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var t=0,e=this.objects.sort(function(t,e){return o.sign(t.zIndex-e.zIndex)});t<e.length;t++){e[t].render(this.ctx)}},t.prototype.update=function(t){for(var e=0,n=this.objects;e<n.length;e++){var r=n[e];r.position.addInPlace(r.movement.scale(t)),r.rotation+=r.rotationMovement,r.width+=r.growth;var o=Math.pow(this.friction,t);r.movement.scaleInPlace(o),r.rotationMovement*=o,r.growth*=o,-1!==r.lifetime&&(r.lifetime-=t)}this.objects=this.objects.filter(function(t){return-1===t.lifetime||t.lifetime>0})},Object.defineProperty(t.prototype,"size",{get:function(){return new r.Vector2(this.ctx.canvas.width,this.ctx.canvas.height)},enumerable:!0,configurable:!0}),t}();e.Scene=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sign=function(t){return 0===t?0:t>0?1:t<0?-1:NaN}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(t,e,n,o,i,s){this.center=e,this.zIndex=n,this.position=o,this.rotation=i,this.width=s,this.image=window.document.createElement("IMG"),this.image.src=t,this.movement=r.Vector2.Zero(),this.rotationMovement=0,this.growth=0,this.lifetime=-1}return Object.defineProperty(t.prototype,"size",{get:function(){return new r.Vector2(this.width,this.width/this.image.width*this.image.height)},enumerable:!0,configurable:!0}),t.prototype.render=function(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation+Math.PI/2),t.globalAlpha=-1===this.lifetime?1:Math.sqrt(this.lifetime/10),t.drawImage(this.image,0,0,this.image.width,this.image.height,-this.size.x*this.center.x,-this.size.y*this.center.y,this.size.x,this.size.y),t.restore()},t}();e.Particle=o},function(t,e,n){"use strict";var r=n(2),o=n(10),i=n(15);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(i.empty)}},function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r,o=n(14);function i(){try{return r.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return r=t,i}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,n){"use strict";var r=n(8);function o(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.getSymbolObservable=o,e.observable=o(r.root),e.$$observable=e.observable},function(t,e,n){"use strict";var r=n(34);function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},e.pipeFromArray=o},function(t,e,n){"use strict";e.noop=function(){}},function(t,e,n){"use strict";var r=n(36);e.share=function(){return r.share()(this)}},function(t,e,n){"use strict";var r=n(37),o=n(17),i=n(16);function s(){return new i.Subject}e.share=function(){return function(t){return o.refCount()(r.multicast(s)(t))}}},function(t,e,n){"use strict";var r=n(38);e.multicast=function(t,e){return function(n){var i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));var s=Object.create(n,r.connectableObservableDescriptor);return s.source=n,s.subjectFactory=i,s}};var o=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();e.MulticastOperator=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(16),i=n(1),s=n(2),c=n(3),u=n(17),a=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new c.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=c.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u.refCount()(this)},e}(i.Observable);e.ConnectableObservable=a;var h=a.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var l=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(o.SubjectSubscriber),f=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new f(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o}}(),function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(s.Subscriber))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(3).Subscription);e.SubjectSubscription=o},function(t,e,n){"use strict";var r=n(1),o=n(42);r.Observable.range=o.range},function(t,e,n){"use strict";var r=n(43);e.range=r.RangeObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e,n,r){t.call(this),this.start=e,this._count=n,this.scheduler=r}return r(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n,r)},e.dispatch=function(t){var e=t.start,n=t.index,r=t.count,o=t.subscriber;n>=r?o.complete():(o.next(e),o.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=0,r=this.start,o=this._count,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:n,count:o,start:r,subscriber:t});for(;;){if(n++>=o){t.complete();break}if(t.next(r++),t.closed)break}},e}(n(1).Observable);e.RangeObservable=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45),o=n(1);n(4);var i=function(){function t(t,e){var n=this;this.touchController=t,this._elementBinder=e,this.ongoingMultiTouches=[],this.multiTouches=o.Observable.create(function(t){n._multiTouchesObserver=t}).share(),this.touchController.touches.subscribe(function(t){var e=n._elementBinder(t.firstFrame),o=n.ongoingMultiTouches.filter(function(t){return t.element===e})[0];void 0===o?(o=new r.MultiTouch(e,t),n.ongoingMultiTouches.push(o),n._multiTouchesObserver.next(o),o.touches.subscribe(function(){},function(){},function(){n.ongoingMultiTouches=n.ongoingMultiTouches.filter(function(t){return t!==o})})):o.addTouch(t)})}return Object.defineProperty(t.prototype,"hoveredElements",{get:function(){var t=this;return o.Observable.create(function(e){t.touchController.hoveredFrames.subscribe(function(n){e.next(t._elementBinder(n))})})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoveredElementsChanges",{get:function(){var t=this;return o.Observable.create(function(e){var n;t.hoveredElements.subscribe(function(t){n!==t&&(e.next([t,n]),n=t)})})},enumerable:!0,configurable:!0}),t}();e.MultiTouchController=i},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=n(1);n(48),n(4);var i=n(19),s=function(){function e(e,n){var r=this;this.element=e,this.firstTouch=n,this.empty=!0,this.ongoingTouches=[],this.touches=o.Observable.create(function(e){r._touchesObserver=e,t(function(){return r.addTouch(n)})}).share()}return e.prototype.addTouch=function(t){var e=this;this.ongoingTouches.push(t),this._touchesObserver.next(t),t.frames.subscribe(function(n){t.firstFrame.position.length(n.position)>=5&&(e.empty=!1)},function(){},function(){e.ongoingTouches=e.ongoingTouches.filter(function(e){return e!==t}),0===e.ongoingTouches.length&&e._touchesObserver.complete()})},Object.defineProperty(e.prototype,"ongoingTouchesChanges",{get:function(){var e=this;return o.Observable.create(function(n){e.touches.subscribe(function(r){n.next(e.ongoingTouches),r.frames.subscribe(function(t){},function(){},function(){t(function(){return n.next(e.ongoingTouches)})})},function(){},function(){n.complete()})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ongoingPositionsChanges",{get:function(){var t=this;return o.Observable.create(function(e){var n=[];t.ongoingTouchesChanges.subscribe(function(t){for(var r=0,o=n;r<o.length;r++){o[r].unsubscribe()}n=t.map(function(n){return n.frames.subscribe(function(){e.next(t)})})},function(){},function(){e.complete()})})},enumerable:!0,configurable:!0}),e.prototype.transformations=function(t){return void 0===t&&(t=r.BoundingBox.One()),i.multiTouchTransformations(this,t)},e.prototype.toString=function(){return"MultiTouch"},e}();e.MultiTouch=s}).call(this,n(18).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},s=!1,c=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){h(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&h(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},r=function(e){t.port2.postMessage(e)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;r=function(e){var n=c.createElement("script");n.onreadystatechange=function(){h(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(h,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return i[o]=s,r(o),o++},u.clearImmediate=a}function a(t){delete i[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=i[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{a(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(9),n(47))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,a=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?a=u.concat(a):l=-1,a.length&&p())}function p(){if(!h){var t=c(f);h=!0;for(var e=a.length;e;){for(u=a,a=[];++l<e;)u&&u[l].run();l=-1,e=a.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function b(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new b(t,e)),1!==a.length||h||c(p)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(1),o=n(49);r.Observable.prototype.finally=o._finally,r.Observable.prototype._finally=o._finally},function(t,e,n){"use strict";var r=n(50);e._finally=function(t){return r.finalize(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=n(2),i=n(3);e.finalize=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.callback))},t}(),c=function(t){function e(e,n){t.call(this,e),this.add(new i.Subscription(n))}return r(e,t),e}(o.Subscriber)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);n(4);var o=n(20),i=n(21),s=function(){function e(t,e,n){void 0===n&&(n=!0);var s=this;this.elements=t,this.anchorElement=e,this.listeners=[],this.touches=r.Observable.create(function(t){s._touchesObserver=t}).share(),this.hoveredFrames=r.Observable.create(function(t){s._hoveredFramesObserver=t}).share(),n&&(this.addListener(o.createMouseListener()),this.addListener(o.createMouseListener([1,2],!0)),this.addListener(i.createTouchListener()))}return e.fromCanvas=function(t){return new e([t],t,!0)},e.prototype.addListener=function(t){this.listeners.push(t);for(var e=0,n=this.elements;e<n.length;e++){var r=n[e];this.callListenerOnElement(t,r)}},e.prototype.addElement=function(t){this.elements.push(t);for(var e=0,n=this.listeners;e<n.length;e++){var r=n[e];this.callListenerOnElement(r,t)}},e.prototype.callListenerOnElement=function(t,e){var n=this;t(e,this.anchorElement,function(t){return n._touchesObserver.next(t)},function(t){void 0!==n._hoveredFramesObserver&&n._hoveredFramesObserver.next(t)})},e.prototype.emulateTouch=function(e){var n=this;t(function(){n._touchesObserver.next(e)})},e}();e.TouchController=s}).call(this,n(18).setImmediate)}]));
//# sourceMappingURL=touchcontroller.js.map